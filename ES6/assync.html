<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //////////asyunc and await//////////
        ////////////question 1///////////////
        
        async function delayedGreeting(name) {
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            console.log(`Hello, ${name}! Welcome to our website.`);
          }
          
          delayedGreeting("Atrooba");
        
          /////////question 2//////////
        
          function fetchData() {
            return new Promise((resolve) => {
              setTimeout(() => {
                const data = { message: "Data received successfully!" };
                resolve(data);
              }, 3000); 
            });
          }
          async function fetchAndLogData() {
            try {
              const data = await fetchData();
              console.log(data);
            } catch (error) {
              console.error("Error fetching data:", error);
            }
          }
          fetchAndLogData();
        
          ///////////question 3///////////
        
          function fetchUsers() {
            return new Promise((resolve) => {
              setTimeout(() => {
                const users = [
                  { id: 1, name: "Atrooba Arif" },
                  { id: 2, name: "Bibi zareen" },
                  { id: 3, name: "Zara Noor Siddiqui" },
                ];
                resolve(users);
              }, 4000); 
            });
          }
          async function fetchAndLogUsers() {
            try {
              const users = await fetchUsers();
              console.log(users);
            } catch (error) {
              console.error("Error fetching users:", error);
            }
          }
          fetchAndLogUsers();
        
          ///////////question 4///////////
        
          async function fetchData(id) {
            try {
              const response = await fetch(`https://atrooba-api.com/data/${id}`);
              if (!response.ok) {
                throw new Error(`Error fetching data for id ${id}. Status: ${response.status}`);
              }
          
              const data = await response.json();
              return data;
            } catch (error) {
              throw new Error(`Error fetching data for id ${id}: ${error.message}`);
            }
          }
        //   async function fetchAndLogData() {
        //     try {
        //       const id = 123; 
        //       const data = await fetchData(id);
        //       console.log(data);
        //     } catch (error) {
        //       console.error(error.message);
        //     }
        //   }
        //   fetchAndLogData();
          
          //////////question 5////////////////
        
          function fetchData(id) {
            return new Promise((resolve, reject) => {
              setTimeout(() => {
                const data = { id, message: "Fetched data successfully!" };
                resolve(data);
              }, 5000); 
            });
          }
          async function fetchAndLogData() {
            try {
              const id = 123; 
              const data = await fetchData(id);
              console.log(data);
            } catch (error) {
              console.error(error.message);
            }
          }
          
          fetchAndLogData();
          
          ////////////question 6///////////
        
          // a. Create a global value for the counter
        let globalCounter = 0;
        
        // b. Create a function that returns a Promise with a setTimeout
        function timeout(value) {
          return new Promise((resolve) => {
            setTimeout(() => {
              globalCounter++;
              resolve({ counter: globalCounter, value });
            }, 1000); // 1 second delay
          });
        }
        
        // d. Create an asynchronous function to output counter and value into the console
        async function outputCounterAndValue(value) {
          const result = await timeout(value);
          console.log(`Global Counter: ${result.counter}, Function Argument: ${result.value}`);
        }
        
        // e. Create a loop to iterate 10 times, invoking the async function
        async function main() {
          for (let i = 1; i <= 10; i++) {
            await outputCounterAndValue(i);
          }
        }
        main();
        
        
    </script>
</body>
</html>